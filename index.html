<html>
    <head>
        <title> Test Push</title>
    </head>
    <body>
        <button onclick="subscribe()">Subscribe</button>

        <script>
            addEventListener('load', async () => {

                let sw = await navigator.serviceWorker.register('./sw.js');
                console.log(sw);
            });

            async function subscribe() {

                let sw = await navigator.serviceWorker.ready;
                let push = await sw.pushManager.subscribe({
                    userVisibleOnly: true,
                    applicationServerKey: 'BJTgpvQBs3U6OdSiX_RL-MUeSt81ljORwXHQdYigSLBUcdMUfeSA7CObwtfrZkWyUdJ25YiO8KuABhkjzHcE6D0'
                })
                console.log(JSON.stringify(push));
            }
        </script>
    </body>
</html>